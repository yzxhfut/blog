(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["37036daa"],{2948:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column",staticStyle:{padding:"0 2rem",height:"100%"}},[n("div",{staticClass:"col-1 row items-center text-h5"},[n("q-icon",{staticStyle:{"font-size":"2rem","padding-right":"1rem"},attrs:{name:"mdi-chevron-left",color:"primary"},on:{click:function(e){return t.$router.back(-1)}}}),n("div",{staticStyle:{"padding-right":"2rem"}},[t._v(t._s(t.title))])],1),n("div",{staticClass:"row items-center",staticStyle:{"font-size":"1.25rem","padding-bottom":"1rem"}},[n("div",[t._v("标题 : ")]),n("div",{staticClass:"col-4",staticStyle:{padding:"0.5rem"}},[n("q-input",{attrs:{outlined:"",dense:"",color:"primary","input-style":"font-size: 1.2rem;",placeholder:"文章标题"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)]),n("div",{staticClass:"row items-center",staticStyle:{"font-size":"1.25rem","padding-bottom":"1.5rem"}},[n("div",[t._v("分类 : ")]),n("div",t._l(t.tags,function(e,i){return n("q-checkbox",{key:i,attrs:{label:e,val:e},model:{value:t.currentTag,callback:function(e){t.currentTag=e},expression:"currentTag"}})}),1)]),n("mavon-editor",{staticClass:"col-8",attrs:{fontSize:"1.1rem"},on:{change:t.getHtml},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("div",{staticClass:"row flex-center",staticStyle:{"padding-top":"1.5rem"}},[n("q-btn",{staticClass:"col-2",staticStyle:{height:"3rem"},attrs:{rounded:"",color:"primary",label:"提 交"},on:{click:t.submit}})],1)],1)},a=[],r=n("967e"),c=n.n(r),o=(n("7514"),n("96cf"),n("6b54"),n("06db"),n("a481"),n("fa84")),s=n.n(o),u={name:"Update",data:function(){return{id:"",value:"",content:"",input:"",article:[],currentTag:[],tags:[]}},watch:{$route:function(t,e){"/updatearticle/new"===t.path&&(this.value="",this.input="",this.currentTag=[])}},computed:{title:function(){return"new"===this.$route.params.id?"新建文章":"修改文章 / "+this.article.title}},methods:{getHtml:function(t,e){this.content=e,this.value=t},submit:function(){"new"===this.$route.params.id?h(this):g(this)}},created:function(){var t=this;t.$q.loading.show(),l(this).then(function(e){for(var n=0;n<e.length;n++)t.tags.push(e[n].tagName)}),"new"!==this.$route.params.id?p(this,this.$route.params.id).then(function(e){t.article=e[0],t.id=e[0].objectId,t.input=e[0].title,t.value=e[0].value,t.currentTag=e[0].tag,t.$q.loading.hide()}):t.$q.loading.hide()}};function l(t){return d.apply(this,arguments)}function d(){return d=s()(c.a.mark(function t(e){var n,i;return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.Bmob.Query("tag"),n.order("tagName"),t.next=4,n.find();case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t)})),d.apply(this,arguments)}function p(t,e){return m.apply(this,arguments)}function m(){return m=s()(c.a.mark(function t(e,n){var i,a;return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.Bmob.Query("article"),i.equalTo("objectId","==",n),t.next=4,i.find();case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t)})),m.apply(this,arguments)}function h(t){t.$q.loading.show();var e=t.Bmob.Query("article");e.set("tag",t.currentTag),e.set("title",t.input),e.set("content",t.content),e.set("value",t.value),e.save().then(function(e){t.$q.loading.hide(),t.$q.notify({message:"提交成功",color:"primary",timeout:1e3}),t.$router.replace("/"),t.$store.commit("active/updateActive",0)}).catch(function(e){t.$q.loading.hide(),t.$q.dialog({title:"提示",message:e.toString(),ok:"确定",cancel:!1})})}function g(t){t.$q.loading.show();var e=t.Bmob.Query("article");e.set("id",t.id),e.set("tag",t.currentTag),e.set("title",t.input),e.set("value",t.value),e.set("content",t.content),e.save().then(function(e){t.$q.loading.hide(),t.$q.notify({message:"提交成功",color:"primary",timeout:3e3}),t.$router.replace("/"),t.$store.commit("active/updateActive",0)}).catch(function(e){t.$q.loading.hide(),t.$q.dialog({title:"提示",message:e.toString(),ok:"确定",cancel:!1})})}var v=u,f=(n("476d"),n("2877")),b=Object(f["a"])(v,i,a,!1,null,"8c2106d4",null);e["default"]=b.exports},"476d":function(t,e,n){"use strict";var i=n("5041"),a=n.n(i);a.a},5041:function(t,e,n){}}]);