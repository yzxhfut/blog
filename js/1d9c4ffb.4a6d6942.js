(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1d9c4ffb"],{"35b2":function(t,e,i){"use strict";var n=i("8115"),a=i.n(n);a.a},7965:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticStyle:{padding:"0.5rem"},attrs:{"style-fn":t.minHeight}},[i("div",{ref:"tt",staticClass:"row justify-center items-start margin-bottom"},[i("q-card",{staticClass:"my-card",class:t.width,style:t.commentHeight,attrs:{bordered:""}},[i("q-toolbar",{staticClass:"bg-white text-black"},[i("div",{staticClass:"card-title"},[t._v("留言板")])]),i("q-separator"),i("q-card-section",{class:t.fontsize},t._l(t.currentComments,function(e,n){return i("q-list",{key:n},[i("q-item",{staticClass:"no-padding-bottom"},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{rounded:""}},[i("img",{attrs:{src:"statics/icons/favicon-32x32.png"}})])],1),i("q-item-section",[t._v(t._s(e.name))]),i("q-item-section",{attrs:{side:""}},[i("q-item-label",[t._v(t._s(e.createdAt))])],1)],1),i("q-item",{staticClass:"no-padding-bottom"},[i("q-item-label",[t._v(t._s(e.content))])],1),e.replyTag?i("div",{staticStyle:{padding:"0.5rem 0"}},t._l(e.comment,function(e,n){return i("div",{key:n,staticClass:"row"},[i("div",{staticClass:"col-2"}),i("div",{staticClass:"col-10 column",staticStyle:{"border-top":"#CBCBCB solid 1px","border-bottom":"#CBCBCB solid 1px",padding:"0.5rem"}},[i("div",{staticClass:"row"},[t._v(t._s(e.name)+" : "+t._s(e.content))]),i("div",{staticClass:"row justify-end items-center"},[i("div",{staticStyle:{"margin-right":"0.25rem"}},[t._v("2019-5-26")])])])])}),0):t._e(),i("q-item",{staticClass:"items-end row justify-end no-padding-top no-min-height"},[e.comment&&0!==e.comment.length&&!e.replyTag?i("q-chip",{attrs:{dense:!t.pc,icon:"visibility",clickable:"",color:"bookmark","text-color":"black",label:"更多"},on:{click:function(t){e.replyTag=!e.replyTag}}}):t._e(),e.replyTag?i("q-chip",{attrs:{dense:!t.pc,icon:"arrow_drop_up",clickable:"",color:"bookmark","text-color":"black",label:"收起"},on:{click:function(t){e.replyTag=!e.replyTag}}}):t._e(),i("q-chip",{attrs:{dense:!t.pc,icon:"create",clickable:"",color:"bookmark","text-color":"black",label:"回复"},on:{click:function(i){return t.writeReplyTag(e.name)}}})],1),i("q-separator")],1)}),1),t.comments.length>t.pageSize?i("q-pagination",{staticClass:"flex-center margin-bottom",attrs:{size:"1rem",max:t.maxPage,"max-pages":t.pageSize},on:{input:t.pageChange},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)],1),i("q-dialog",{model:{value:t.commitDialog,callback:function(e){t.commitDialog=e},expression:"commitDialog"}},[i("q-card",{staticClass:"my-card",style:t.dialogWidth,attrs:{bordered:""}},[i("q-card-section",{staticClass:"bg-white text-black"},[i("div",{staticClass:"text-h6"},[t._v(t._s(t.replyTitle))])]),i("q-separator"),i("q-card-section",{class:t.fontsize},[i("q-input",{attrs:{outlined:"",maxlength:"10",placeholder:"昵称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("q-input",{staticClass:"input-margin",staticStyle:{"padding-bottom":"0"},attrs:{outlined:"",maxlength:"200",placeholder:"请填写你的留言,200字以内",type:"textarea"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"right",staticStyle:{margin:"0 1rem 1rem 0"},attrs:{color:"primary",label:"提 交"},on:{click:t.writeComment}})],1)],1)],1),i("q-page-sticky",{attrs:{position:t.position,offset:t.offset}},[i("q-btn",{attrs:{fab:"",icon:"create",color:"accent"},on:{click:t.writeCommentTag}})],1)],1)},a=[],o=i("a34a"),s=i.n(o),c=(i("7514"),i("96cf"),i("c973")),r=i.n(c),l=(i("7f7f"),{name:"PageAbout",data:function(){return{pageHeight:null,pageWidth:null,commitDialog:!1,replyTitle:"写留言",name:null,content:null,currentPage:1,pageSize:10,comments:[],currentComments:[],lookReply:[]}},computed:{width:function(){return this.$q.platform.is.desktop?"col-6":"col-12 justify-center"},fontsize:function(){return this.$q.platform.is.desktop?"pc-font-size":"no-pc-font-size"},pc:function(){return this.$q.platform.is.desktop},commentHeight:function(){return{"min-height":this.pageHeight}},maxPage:function(){return Math.ceil(this.comments.length/this.pageSize)},dialogWidth:function(){return this.$q.platform.is.desktop?{"min-width":"600px"}:{"min-width":this.pageWidth+"px"}},position:function(){return this.$q.platform.is.desktop?"bottom-right":"bottom-left"},offset:function(){return this.$q.platform.is.desktop?[this.pageWidth/5,18]:[18,18]}},methods:{writeReplyTag:function(t){this.commitDialog=!0,this.replyTitle="回复 "+t},writeComment:function(){var t=this,e=this.Bmob.Query("comment");e.set("name",this.name),e.set("content",this.content),e.save().then(function(e){t.commitDialog=!1,t.$q.dialog({title:"提示",message:"留言成功",ok:"确定"})}).catch(function(t){console.log(t)})},writeCommentTag:function(){this.commitDialog=!0,this.replyTitle="写留言"},more:function(t){this.lookReply[t]=!0,console.log(t)},alert:function(){this.$q.dialog({title:"提示",message:"提交成功"}).onOk(function(){console.log("确定")})},minHeight:function(t){this.pageHeight="calc(100vh - 1.5rem - ".concat(t,"px)")},pageChange:function(t){this.currentComments=[],this.lookReply=[];for(var e=(this.currentPage-1)*this.pageSize;e<this.currentPage*this.pageSize;e++)e<this.comments.length&&(this.currentComments.push(this.comments[e]),this.lookReply.push(!1));document.documentElement.scrollTop=0}},mounted:function(){this.pageWidth=this.$refs.tt.offsetWidth},created:function(){var t=this;m(t).then(function(e){t.comments=e;for(var i=(t.currentPage-1)*t.pageSize;i<t.currentPage*t.pageSize;i++)i<t.comments.length&&(t.currentComments.push(t.comments[i]),t.lookReply.push(!1))})}});function m(t){return p.apply(this,arguments)}function p(){return p=r()(s.a.mark(function t(e){var i,n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.Bmob.Query("comment"),i.order("-createdAt"),t.next=4,i.find();case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}},t)})),p.apply(this,arguments)}var u=l,g=(i("35b2"),i("2877")),d=Object(g["a"])(u,n,a,!1,null,null,null);e["default"]=d.exports},8115:function(t,e,i){}}]);