(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["488c0142"],{8192:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column",staticStyle:{padding:"0 2rem",height:"100%"}},[t._m(0),n("div",{staticClass:"col-9 column",staticStyle:{"flex-wrap":"nowrap"}},[t._l(t.currentContents,function(e,i){return n("div",{key:i,staticClass:"row items-center item",staticStyle:{padding:"1.5rem 0"}},[n("div",{staticStyle:{width:"5%"}},[t._v(t._s(i+1))]),n("div",{staticClass:"col-5"},[t._v(t._s(e.title))]),n("div",{staticClass:"col-1",staticStyle:{"margin-right":"3rem"}},[t._v(t._s(e.createdAt.split(" ")[0]))]),n("div",{staticClass:"col-1 text-blue op",on:{click:function(n){return t.$router.push("/updatearticle/"+e.objectId)}}},[t._v("修改")]),n("div",{staticClass:"col-1 text-red op",on:{click:function(n){return t.deleteArticle(e.objectId)}}},[t._v("删除")])])}),n("div",{staticClass:"row"},[n("q-separator",{staticStyle:{background:"darkgrey"}})],1)],2),n("div",{staticClass:"col-1 row"},[t.contents.length>t.pageSize?n("q-pagination",{staticClass:"col-2 justify-center",attrs:{size:"1rem",max:t.maxPage,"max-pages":t.pageSize},on:{input:t.pageChange},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-1 row items-center text-h5"},[n("div",{staticStyle:{"padding-right":"2rem"}},[t._v("文章列表")])])}],r=n("967e"),c=n.n(r),s=(n("7514"),n("96cf"),n("6b54"),n("06db"),n("fa84")),o=n.n(s),l={name:"Article",data:function(){return{currentPage:1,pageSize:10,contents:[],currentContents:[]}},inject:["reload"],computed:{type:function(){return this.$route.params.type||"文章"},maxPage:function(){return Math.ceil(this.contents.length/this.pageSize)}},methods:{deleteArticle:function(t){var e=this;this.$q.dialog({title:"提示",message:"确定删除当前文章？",ok:"确定",cancel:"取消"}).onOk(function(){g(e,t)})},pageChange:function(t){this.currentContents=[];for(var e=(this.currentPage-1)*this.pageSize;e<this.currentPage*this.pageSize;e++)e<this.contents.length&&this.currentContents.push(this.contents[e])}},created:function(){var t=this;u(this).then(function(e){t.contents=e;for(var n=(t.currentPage-1)*t.pageSize;n<t.currentPage*t.pageSize;n++)n<t.contents.length&&t.currentContents.push(t.contents[n]);t.$q.loading.hide()})}};function u(t){return d.apply(this,arguments)}function d(){return d=o()(c.a.mark(function t(e){var n,i;return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),n=e.Bmob.Query("article"),n.order("-createdAt"),t.next=5,n.find();case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}},t)})),d.apply(this,arguments)}function g(t,e){t.$q.loading.show();var n=t.Bmob.Query("article");n.destroy(e).then(function(e){t.$q.loading.hide(),t.$q.notify({message:"删除成功",color:"primary",timeout:1e3}),t.reload()}).catch(function(e){t.$q.loading.hide(),t.$q.dialog({title:"提示",message:e.toString(),ok:"确定"})})}var h=l,p=(n("ade0"),n("2877")),f=Object(p["a"])(h,i,a,!1,null,"2683de08",null);e["default"]=f.exports},"975e":function(t,e,n){},ade0:function(t,e,n){"use strict";var i=n("975e"),a=n.n(i);a.a}}]);